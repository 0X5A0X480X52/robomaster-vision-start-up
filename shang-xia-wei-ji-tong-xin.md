---
icon: usb
---

# 上下位机通信

在 RoboMaster 系统中，“上位机”通常指负责处理视觉识别、路径规划等高层逻辑的计算单元（如笔记本电脑或嵌入式工控机），而“下位机”则是用于控制机械执行部件的微控制器（如 STM32）。两者之间的通信对于系统协同控制至关重要。

## 常见通信协议

**1. 串口通信（UART）**

* 最常用的通信方式，点对点，成本低，可靠性高。
* 适用于上位机与下位机之间进行命令、控制量或坐标数据的传输。
* 常见波特率有 115200、921600 等。

**2. USB（虚拟串口）**

* 实质上是将串口通信封装在 USB 协议中，操作方式与 UART 类似，但传输速度更高。

**3. CAN 总线**

* 多节点通信协议，具备抗干扰能力强、实时性高等特点，适用于多板协同控制。

**4. SPI/I2C**

* 常用于嵌入式设备内部或板间通信，不常用于上位机与下位机之间。

**5. 以太网（TCP/IP 或 UDP）**

* 适用于需要高速传输大数据量（如图像流）的应用。
* TCP：可靠、面向连接；UDP：速度快、不保证可靠性。

***

## 上下位机通信库

**Python 常用库：**

* `pyserial`：用于串口通信，简单易用。
* `socket`：实现 TCP/UDP 网络通信。
* `pyusb`：用于与 USB 设备通信。
* `can`：支持 CAN 总线设备（需要硬件支持）。

**C++ 常用库：**

* `boost::asio`：支持异步串口与网络通信，稳定高效。
* `serial`：一个轻量级串口通信库，适用于 ROS 等平台。
* `socket API`（`<sys/socket.h>`）：C/C++ 标准网络编程接口，用于 TCP/UDP 通信。
* `libusb`：跨平台 USB 通信库。
* `CANopenStack/CANlib`：用于 CAN 总线协议实现。

